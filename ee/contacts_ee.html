<!DOCTYPE html>
<html lang="et">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Kontaktid</title>
    <script>
        document.addEventListener("DOMContentLoaded", function () {
            const repoName = window.location.pathname.includes("/CV/") ? "CV" : "";

            function getScreenResolution() {
                return {
                    width: window.innerWidth * window.devicePixelRatio,
                    height: window.innerHeight * window.devicePixelRatio
                };
            }

            let { width, height } = getScreenResolution();
            let prevWidth = parseInt(localStorage.getItem("screenWidth")) || 0;
            let prevHeight = parseInt(localStorage.getItem("screenHeight")) || 0;

            let cssFile = (width >= 1920 && height >= 1080) 
                ? `/${repoName}/global-assets/styles_contacts.css` 
                : `/${repoName}/global-assets/styles_contacts_lowres.css`;

            let link = document.createElement("link");
            link.rel = "stylesheet";
            link.href = cssFile;
            document.head.appendChild(link);

            if (width !== prevWidth || height !== prevHeight) {
                localStorage.setItem("screenWidth", width);
                localStorage.setItem("screenHeight", height);
            }

            window.addEventListener("resize", function () {
                let { width: newWidth, height: newHeight } = getScreenResolution();
                if (newWidth !== prevWidth || newHeight !== prevHeight) {
                    localStorage.setItem("screenWidth", newWidth);
                    localStorage.setItem("screenHeight", newHeight);
                    location.reload();
                }
            });

            // Динамически изменяем ссылки в меню
            document.querySelectorAll("#nav-menu a").forEach(link => {
                let href = link.getAttribute("href");
                if (!href.startsWith("http")) {
                    link.setAttribute("href", `/${repoName}/${href}`);
                }
            });

            // Автоматическое обновление года в футере
            document.getElementById("year").textContent = new Date().getFullYear();
        });
    </script>
</head>

<body>

<!-- Menüü -->
<nav id="nav-menu">
    <a href="ee/index_ee.html">Avaleht</a>
    <a href="ee/tools_ee.html">Programmid</a>
    <a href="ee/portfolio_ee.html">Portfoolio</a>
    <a href="ee/contacts_ee.html">Kontaktid</a>
    <a href="ee/PDF/Zhimirikin_CV_08.02.2025_EST.pdf" target="_blank">CV</a>
</nav>

<!-- Kontaktid -->
<section id="contacts">
    <h2>Kontaktid</h2>
    <p>Telefon, WhatsApp: +372 53235078 e-post: d.zhimirikin@gmail.com</p>
    <p>Jätke sõnum ja ma võtan teiega ühendust.</p>

    <!-- Formulaar sõnumite saatmiseks läbi Formspree -->
    <form id="contact-form" action="https://formspree.io/f/xgvozrjd" method="POST">
        <label for="name">Teie nimi:</label>
        <input type="text" id="name" name="name" required>

        <label for="email">Teie e-post:</label>
        <input type="email" id="email" name="email" required>

        <label for="message">Sõnum:</label>
        <textarea id="message" name="message" rows="20" required></textarea>

        <button type="submit">Saada</button>
    </form>

    <!-- Sõnum edukast saatmisest -->
    <div id="confirmation-message" style="display: none; color: green;">
        Teie sõnum on saadetud.
    </div>
</section>

<!-- Allkiri all -->
<footer>
    <p>Dmitry Zhimirikin, <span id="year"></span></p>
</footer>

<!-- Väline skript -->
<script>
    const repoName = window.location.pathname.includes("/CV/") ? "/CV" : "";
    const script = document.createElement("script");
    script.src = `${repoName}/ee/scripts_contacts_ee.js`;
    document.body.appendChild(script);
</script>

</body>
</html>